@prefix dct: <http://purl.org/dc/terms/> .
@prefix foaf: <http://xmlns.com/foaf/0.1/> .
@prefix haOrg: <https://data.hetarchief.be/ns/organisations#> .
@prefix org: <http://www.w3.org/ns/org#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix schema: <https://schema.org/> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix skos: <http://www.w3.org/2004/02/skos/core#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

# onderstaande namespaces lijken vooralsnog niet nodig
# @prefix agr: <http://promsns.org/def/agr#> .
# @prefix cc: <http://creativecommons.org/ns#> .
# @prefix owl: <http://www.w3.org/2002/07/owl#> .
# @prefix rov: <http://www.w3.org/ns/regorg#> .



<>  dct:author  [
        schema:name   "Miel Vander Sande" ;
        schema:email  "miel.vandersande@meemoo.be"
    ] ,
                [
        schema:name   "Milan Valadou" ;
        schema:email  "milan.valadou@meemoo.be"
    ] ;
    dct:title     "SHACL Model Organisations"@en ;
    dct:title     "Modèle SHACL Organisations"@fr ;
    dct:title     "SHACL-model Organisaties"@nl ;
    dct:created   "2022-01-07" ;
    dct:modified  "2022-06-16" ;
    dct:description """SHACL model to validate/describe organisations."""@en ;
    dct:description """Modèle SHACL pour valider/décrire des organisations."""@fr ;
    dct:description """SHACL-model voor het valideren/beschrijven van organisaties."""@nl .


######################
#     NodeShapes     #
######################

haOrg:OrganizationShape a sh:NodeShape ;
  sh:targetClass org:Organization ;
  sh:property haOrg:prefLabelShape, 
              haOrg:altLabelShape, 
              [
                sh:path haOrg:hasLogo ;
                sh:minCount 1 ;
                sh:class haOrg:Logo ;

                sh:name "logo"@en ;
                sh:name "logo"@fr ;
                sh:name "logo"@nl ;
                sh:description "Each Organization needs at least one associated logo."@en ;
                sh:description "Chaque Organisation a besoin d'au moin un logo associé."@fr ;
                sh:description "Elke Organisatie heeft minstens één geassocieerd logo nodig."@nl ;
                
                sh:severity sh:Violation ;
                sh:message "haOrg:hasLogo is missing or its Object is no haOrg:logo"@en ;
                sh:message "haOrg:hasLogo est absent ou son Object n'est pas un haOrg:logo"@fr ;
                sh:message "haOrg:hasLogo ontbreekt of zijn Object is geen haOrg:logo"@nl
              ], 
              [
                sh:path foaf:homepage ;
                sh:maxCount 1 ;
                sh:nodeKind sh:IRI ;
                
                sh:name "homepage"@en ;
                sh:name "page d'accueil"@fr ;
                sh:name "homepagina"@nl ;
                sh:description "Elke Organisatie kan maximum 1 homepagina hebben. Deze homepagina moet een valide IRI zijn."@nl ;
                
                sh:severity sh:Warning ;
                sh:message "foaf:homepage occurs more than once or its object is no IRI"@en ;
                sh:message "foaf:homepage apparaît plus d'une seule fois ou son Object n'est pas un IRI"@fr ;
                sh:message "foaf:homepage komt meer dan eens voor of zijn Object is geen IRI"@nl
              ],
              [
                sh:path dct:description ;
                sh:maxCount 1 ;
                sh:nodeKind sh:Literal ;
                
                sh:name "description"@en ;
                sh:name "description"@fr ;
                sh:name "beschrijving"@nl ;
                sh:description "Elke Organisatie kan maximum 1 beschrijving hebben. Deze beschrijving moet van het datatype String zijn."@nl ;
                
                sh:description "Description of the organization."@en ;
                sh:description "Description de l'organization."@fr ;
                sh:description "Beschrijving van de organisatie."@nl ;

                sh:severity sh:Warning ;
                sh:message "dct:description is not of type String or occurs more than once"@en ;
                sh:message "dct:description n'est pas de type String ou apparaît plus d'une seule fois"@fr ;
                sh:message "dct:description is niet van het type String of komt meer dan eens voor"@nl
              ],
              [
                sh:path org:classification ;
                # vraag: op dit moment lijken de organisaties in INT geen classificatie te hebben; is dit iets dat nog moet worden toegevoegd aan de data/ETL?
                # lijkt me wel dat elke organisatie er idealiter minstens 1 heeft
                # sh:minCount 1 ;
                sh:class haOrg:OrganizationType ;

                sh:name "classification"@en ;
                sh:name "classification"@fr ;
                sh:name "classificatie"@nl ;
                sh:description "Elke Organisatie moet behoren tot minstens 1 organisatietype."@nl ;

                sh:severity sh:Violation ;
                sh:message "org:classification is missing or its Object is no haOrg:OrganizationType"@en ;
                sh:message "org:classification est absent ou son Object n'est pas un haOrg:OrganizationType"@fr ;
                sh:message "org:classification ontbreekt of zijn Object is geen haOrg:OrganizationType"@nl
              ],
              [
                sh:path org:hasUnit ;
                sh:class org:OrganizationalUnit ;

                sh:name "has Unit"@en ;
                sh:name "possède une Unité"@fr ;
                sh:name "heeft een eenheid"@nl ;
                sh:description "Een Organisatie kan een aparte eenheid hebben."@nl ;
                
                sh:severity sh:Info ;
                sh:message "The Object of org:hasUnit is no org:OrganizationalUnit"@en ;
                sh:message "L'Object de org:hasUnit n'est pas un org:OrganizationalUnit"@fr ;
                sh:message "Het Object van org:hasUnit is geen org:OrganizationalUnit"@nl ;
              ],
              [
                sh:path schema:contactPoint ;
                sh:class schema:ContactPoint ;
                
                sh:name "contact point"@en ;
                sh:name "point de contact"@fr ;
                sh:name "aanspreekpunt"@nl ;
                sh:description "Een Organisatie kan een aanspreekpunt hebben."@nl ;
                
                sh:severity sh:Info ;
                sh:message "org:contactPoint is no schema:ContactPoint"@en ;
                sh:message "org:contactPoint n'est pas un schema:ContactPoint"@fr ;
                sh:message "org:contactPoint is geen schema:ContactPoint"@nl
              ],
              [
                sh:path org:hasSite ;
                sh:class org:Site ;
                
                sh:name "has site"@en ;
                sh:name "a un site"@fr ;
                sh:name "heeft vestiging"@nl ;
                sh:description "Een Organisatie kan een vestiging hebben."@nl ;
                
                sh:severity sh:Warning ;
                sh:message "org:hasSite occurs more than once or its Object is no org:Site"@en ;
                sh:message "org:hasSite apparaît plus d'une seule fois ou son Object n'est pas un org:Site"@fr ;
                sh:message "org:hasSite komt meer dan eens voor of zijn Object is geen org:Site"@nl
              ],
              [
                sh:path org:hasPrimarySite ;
                sh:maxCount 1 ;
                sh:class org:Site ;
                
                sh:name "has primary site"@en ;
                sh:name "a un site principal"@fr ;
                sh:name "heeft primaire vestiging"@nl ;
                sh:description "Elke Organisatie kan maximum 1 primaire vestiging hebben."@nl ;
                
                sh:severity sh:Warning ;
                sh:message "org:hasPrimarySite occurs more than once or its Object is no org:Site"@en ;
                sh:message "org:hasPrimarySite apparaît plus d'une seule fois ou son Object n'est pas un org:Site"@fr ;
                sh:message "org:hasPrimarySite komt meer dan eens voor of zijn Object is geen org:Site"@nl
              ],
              [
                sh:path haOrg:hasAccountmanager ;
                sh:maxCount 1 ;
                sh:class schema:Person ;

                sh:name "has account manager"@en ;
                sh:name "a gestionnaire de comptes"@fr ;
                sh:name "heeft account manager"@nl ;
                sh:description "Elke Organisatie kan maximum 1 accountmanager hebben. Deze accountmanager moet een persoon zijn."@nl ;

                sh:severity sh:Warning ;
                sh:message "haOrg:hasAccountmanager occurs more than once or its Object is no schema:Person"@en ;
                sh:message "haOrg:hasAccountmanager apparaît plus d'une seule fois ou son Object n'est pas un schema:Person"@fr ;
                sh:message "haOrg:hasAccountmanager komt meer dan eens voor of zijn Object is geen schema:Person"@nl 
              ],
              [
                sh:path org:hasPost ;
                # vraag: lijkt mij logisch dat een organisatie minstens 1 positie moet hebben vooraleer het effectief een organisatie is?
                # in de data uit stardog zit er echter veel zonder Post
                # sh:minCount 1 ;
                sh:class org:Post ;

                sh:name "has post. Indicates a Post which exists within the Organization."@en ;
                sh:name "possède un poste. Indique un Poste qui existe dans l'Organisation."@fr ;
                sh:name "heeft positie. Verwijst naar een positie binnen de organisatie."@nl ;
                sh:description "Elke Organisatie moet minimum 1 positie hebben binnen de Organisatie."@nl ;

                sh:severity sh:Warning ;
                sh:message "org:hasPost is missing or its Object is no org:Post"@en ;
                sh:message "org:hasPost est absent ou son Object n'est pas un org:Post"@fr ;
                sh:message "org:hasPost ontbreekt of zijn Object is geen org:Post"@nl ;
              ] .

haOrg:OrganizationalUnitShape a sh:NodeShape ;
  sh:targetClass org:OrganizationalUnit ;
  sh:property [
                sh:path org:unitOf ;
                sh:minCount 1 ;
                sh:class org:Organization ;
        
                sh:name "unit of"@en ;
                sh:name "unité de"@fr ;
                sh:name "organisatie-eenheid van"@nl ;
                sh:description "Elke organisatie-eenheid moet deel uitmaken van een Organisatie."@nl ;
        
                sh:severity sh:Violation ;
                sh:message "org:unitOf is missing or its Object is no org:Organization."@en ;
                sh:message "org:unitOf est absent ou son Object n'est pas un org:Organization."@fr ;
                sh:message "org:unitOf ontbreekt of zijn Object is geen org:Organization."@nl 
              ] .

haOrg:ContentPartnerShape a sh:NodeShape ;
  sh:targetClass haOrg:ContentPartner ;
  sh:property haOrg:accountManagerShape .

haOrg:ServiceProviderShape  a sh:NodeShape ;
  sh:targetClass haOrg:ServiceProvider .

haOrg:ServiceConsumerShape  a sh:NodeShape ;
  sh:targetClass haOrg:ServiceConsumer .

haOrg:EducationalOrganizationShape  a sh:NodeShape ;
  sh:targetClass haOrg:EducationalOrganization .

haOrg:EducationalPartnerShape  a sh:NodeShape ;
  sh:targetClass haOrg:EducationalPartner ;
  sh:property haOrg:accountManagerShape .

haOrg:EducationalPublisherShape  a sh:NodeShape ;
  sh:targetClass haOrg:EducationalPublisher .

haOrg:SchoolShape a sh:NodeShape ;
  sh:targetClass haOrg:School .

haOrg:SiteShape  a  sh:NodeShape ;
  sh:targetClass org:Site ;
  sh:property [
                sh:path org:siteAddress ;
                # vraag: in de data komen nu sites voor met meerdere postadressen; is dit iets dat we willen, of zetten we hier een maximum op?
                # sh:maxCount 1 ;
                sh:class schema:PostalAddress ;
                
                sh:name "site Address"@en ;
                sh:name "adresse du Site"@fr ;
                sh:name "adres van de vestiging"@nl ;
                sh:description "Elke vestiging mag maximaal 1 adres hebben."@nl ;
        
                sh:severity sh:Violation;
                sh:message "org:siteAddress occurs more than once or its Object is no schema:PostalAddress"@en ;
                sh:message "org:siteAddress apparaît plus d'une seule fois ou son Object n'est pas un schema:PostalAddress"@fr ;
                sh:message "org:siteAddress komt meer dan eens voor of zijn Object is geen schema:PostalAddress"@nl 
              ] .

haOrg:PostShape a sh:NodeShape;
  sh:targetClass org:Post ;
  sh:property [        
                sh:path org:role ;
                sh:minCount 1 ;
                sh:class org:Role ;
        
                sh:name "role"@en ;
                sh:name "rôle"@fr ;
                sh:name "rol"@nl ;
                sh:description """Indicates the Role that the Agent plays in a Membership relationship with an Organization."""@en ;
                sh:description """Indique le Rôle de l'Agent dans son Engagement avec l'Organisation."""@fr ;
                sh:description """Rol die de agent vervult als lid van de organisatie."""@nl ; 
        
                sh:severity sh:Violation ;
                sh:message "org:role is missing or its Object is no org:Role"@en ;
                sh:message "org:role est absent ou son Object n'est pas un org:Role"@fr ;
                sh:message "org:role ontbreekt of zijn Object is geen org:Role"@nl ;
              ],
              [                
                sh:path org:postIn ;
                sh:minCount 1 ;
                sh:class org:Organization ;
        
                sh:name "post in"@en ;
                sh:name "poste chez"@fr ;
                sh:name "positie in"@nl ;
                sh:description """Indicates the Organization in which the Post exists."""@en ;
                sh:description """Indique l'Organisation dans laquelle le Poste existe."""@fr ;
                sh:description """Duidt de Organisatie aan waarbinnen de positie bestaat."""@nl ;
        
                sh:severity sh:Warning ;
                sh:message "org:postIn is missing or its Object is no org:Organization"@en ;
                sh:message "org:postIn est absent ou son Object n'est pas un org:Organization"@fr ;
                sh:message "org:postIn ontbreekt of zijn Object is geen org:Organization"@nl 
              ] .
    
haOrg:RoleShape a sh:NodeShape;
  sh:targetClass org:Role ;
  sh:property haOrg:prefLabelShape .

haOrg:PersonShape a sh:NodeShape ;
  sh:targetClass schema:Person ;
  sh:property [    
                sh:path org:holds ;
                # sh:minCount 1 ;
                sh:class org:Post ;
    
                sh:name "holds"@en ;
                sh:name "occupe"@fr ;
                sh:name "heeft positie"@nl ;
    
                sh:severity sh:Violation ;
                sh:message "org:holds is missing or its Object is no org:Post"@en ;
                sh:message "org:holds est absent ou son Object n'est pas un org:Post"@fr ;
                sh:message "org:holds ontbreekt of zijn Object is geen org:Post"@nl
              ],
              [    
                sh:path schema:givenName ;
                sh:minCount 1 ;
                sh:datatype xsd:string ;

                sh:description "Given name. In the U.S., the first name of a Person. This can be used along with familyName instead of the name property."@en ;
                sh:name "given name"@en ;
                sh:name "prénom"@fr ;
                sh:name "voornaam"@nl
              ],
              [    
                sh:path schema:familyName ;
                sh:minCount 1 ;
                sh:datatype xsd:string ;

                sh:description "Family name. In the U.S., the last name of an Person. This can be used along with givenName instead of the name property."@en ;
                sh:name "family name"@en ;
                sh:name "familienaam"@nl ;
              ],
              [
                sh:path schema:email ;
                sh:datatype xsd:string ;
                sh:description "Email address."@en ;
                sh:name "email"@en ;
                sh:name "email"@nl ;
              ],
              [
                sh:path haOrg:isAccountManagerOf ;
                sh:or (
                        [ sh:class haOrg:ContentPartner ]
                        [ sh:class haOrg:EducationalPartner ]
                      ) ;
                sh:name "is account manager of"@en ;
                sh:name "est le Gestionnaire de Comptes de"@fr ;
                sh:name "is account manager van"@nl ;
    
                sh:severity sh:Warning ;
                sh:message "The Object of haOrg:isAccountManagerOf is neither haOrg:ContentPartner nor haOrg:EducationalPartner."@en
              ] .

haOrg:PostalAddressShape  a sh:NodeShape ;
  sh:targetClass schema:PostalAddress ;
  sh:property haOrg:PostalAddress-addressCountryShape ;
  sh:property haOrg:PostalAddress-addressLocalityShape ;
  sh:property haOrg:PostalAddress-addressRegionShape ;
  sh:property haOrg:PostalAddress-postOfficeBoxNumberShape ;
  sh:property haOrg:PostalAddress-postalCodeShape ;
  sh:property haOrg:PostalAddress-streetAddressShape .

haOrg:ContactPointShape  a sh:NodeShape ;
  sh:targetClass schema:ContactPoint ;
  sh:property schema:ContactPoint-contactTypeShape ;
  sh:property schema:ContactPoint-emailShape ;
  sh:property schema:ContactPoint-telephoneShape .     

##########################
#     PropertyShapes     #
##########################

haOrg:PostalAddress-addressCountryShape a sh:PropertyShape ;
  sh:path schema:addressCountry ;
  
  sh:name "country"@en ;
  sh:name "pays"@fr ;
  sh:name "land"@nl ;
  
  sh:or (
          [ sh:class schema:Country ]
          [ sh:datatype xsd:string ]
        ) ; 
  
  sh:severity sh:Info ;
  sh:message "The Object of schema:addressCountry is neither schema:Country nor xsd:string."@en ;
  sh:message "L'Object de schema:addressCountry n'est pas un schema:Country ou xsd:string."@fr ;
  sh:message "Het Object van schema:addressCountry is geen schema:Country of xsd:string."@nl.

haOrg:PostalAddress-addressLocalityShape  a  sh:PropertyShape ;
  sh:path schema:addressLocality ;
  sh:datatype xsd:string ;
  
  sh:description "The locality in which the street address is, and which is in the region. For example, Mountain View." ;
  sh:name "addressLocality" .

haOrg:PostalAddress-addressRegionShape  a sh:PropertyShape ;
  sh:path schema:addressRegion ;
  sh:datatype xsd:string ;
  
  sh:description "The region in which the locality is, and which is in the country. For example, California or another appropriate first-level <a href=\"https://en.wikipedia.org/wiki/List_of_administrative_divisions_by_country\">Administrative division</a>" ;
  sh:name "addressRegion" .

haOrg:PostalAddress-postOfficeBoxNumberShape  a sh:PropertyShape ;
  sh:path schema:postOfficeBoxNumber ;
  sh:datatype xsd:string ;
  
  sh:description "The post office box number for PO box addresses." ;
  sh:name "postOfficeBoxNumber" .

haOrg:PostalAddress-postalCodeShape a sh:PropertyShape ;
  sh:path schema:postalCode ;
  sh:datatype xsd:string ;

  sh:description "The postal code. For example, 94043." ;
  sh:name "postalCode" .

haOrg:PostalAddress-streetAddressShape  a sh:PropertyShape ;
  sh:path schema:streetAddress ;
  sh:datatype xsd:string ;
  
  sh:name "streetAddress" .

haOrg:ContactPoint-contactTypeShape  a sh:PropertyShape ;
  sh:path schema:contactType ;
  sh:datatype xsd:string ;
  
  sh:name "contact type"@en ;
  sh:name "contacttype"@nl .

haOrg:ContactPoint-emailShape a sh:PropertyShape ;
  sh:path schema:email ;
  sh:datatype xsd:string ;
  
  sh:name "email"@en ;
  sh:name "email"@nl .

haOrg:ContactPoint-telephoneShape  a sh:PropertyShape ;
  sh:path schema:telephone ;
  sh:datatype xsd:string ;
  
  sh:name "telephone"@en ;
  sh:name "telefoonnummer"@nl .

haOrg:prefLabelShape  a sh:PropertyShape ;
  sh:path skos:prefLabel ;
  sh:minCount 1 ;
  sh:maxCount 1 ;
  sh:datatype xsd:string ;
    
  sh:name "preferred label"@en ;
  sh:name "label préféré"@fr ;
  sh:name "voorkeursnaam/-label"@nl ;
  sh:description "Een voorkeursnaam/-label moet exact eenmaal voorkomen"@nl ;
    
  sh:severity sh:Violation ;
  sh:message "skos:prefLabel is missing or its Object is no xsd:string."@en ;
  sh:message "skos:prefLabel is missing or its Object is no xsd:string."@fr ;
  sh:message "skos:prefLabel is missing or its Object is no xsd:string."@nl .

haOrg:altLabelShape a sh:PropertyShape ;
  sh:path skos:altLabel ;
  sh:datatype xsd:string ;

  sh:name "alternative label"@en ;
  sh:name "label alternatif"@fr ;
  sh:name "alternatieve naam/label"@nl ;
    
  sh:severity sh:Warning ;
  sh:message "skos:altLabel is missing or no Literal"@en .
    
haOrg:accountManagerShape  a sh:PropertyShape ;    
  sh:path haOrg:hasAccountManager ;
  sh:minCount 1 ;
  sh:maxCount 1 ;
  sh:class schema:Person ;
    
  sh:name "has account manager"@en ;
  sh:name "a gestionnaire de comptes"@fr ;
  sh:name "heeft account manager"@nl ;
    
  sh:severity sh:Violation ;
  sh:message "haOrg:hasAccountManager is missing, occurs more than once or its Object is no schema:Person"@en ;
  sh:message "haOrg:hasAccountManager est absemt, apparaît plus d'une seule fois ou son Object n'est pas un schema:Person"@fr ;
  sh:message "haOrg:hasAccountManager ontbreekt, komt meer dan eens voor or its Object is no schema:Person"@nl .