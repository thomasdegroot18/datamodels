@prefix agr: <http://promsns.org/def/agr#> .
@prefix dct: <http://purl.org/dc/terms/> .
@prefix meemoo: <https://data.hetarchief.be/ns/organisatie#> .
@prefix org: <http://www.w3.org/ns/org#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix schema: <https://schema.org/> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix skos: <http://www.w3.org/2004/02/skos/core#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

@prefix cc: <http://creativecommons.org/ns#> .
@prefix rov: <http://www.w3.org/ns/regorg#> .
@prefix foaf:       <http://xmlns.com/foaf/0.1/> .


<>  dct:author  [
        schema:name   "Miel Vander Sande" ;
        schema:email  "miel.vandersande@meemoo.be"
    ] ,
                [
        schema:name   "Milan Valadou" ;
        schema:email  "milan.valadou@meemoo.be"
    ] ;
    dct:title     "SHACL Model Organisations"@en ;
    dct:title     "Modèle SHACL Organisations"@fr ;
    dct:title     "SHACL-model Organisaties"@nl ;
    dct:created   "2022-01-07" ;
    dct:modified  "2022-03-28" ;
    dct:description """SHACL model to validate/describe organisations."""@en ;
    dct:description """Modèle SHACL pour valider/décrire des organisations."""@fr ;
    dct:description """SHACL-model voor het valideren/beschrijven van organisaties."""@nl .


######################
#     NodeShapes     #
######################

meemoo:OrganizationShape a sh:NodeShape ;
  sh:targetClass org:Organization ;
  sh:property meemoo:prefLabelShape, 
              meemoo:altLabelShape, 
              [
                sh:path meemoo:hasLogo ;
                sh:minCount 1 ;
                sh:class meemoo:logo ;

                sh:name "logo"@en ;
                sh:name "logo"@fr ;
                sh:name "logo"@nl ;
                sh:description "An associated logo."@en ;
                sh:description "Un logo associé."@fr ;
                sh:description "Een geassocieerd logo."@nl ;
                
                sh:severity sh:Violation ;
                sh:message "schema:logo is missing or its Object is no meemoo:logo"@en ;
                sh:message "schema:logo est absent ou son Object n'est pas un meemoo:logo"@fr ;
                sh:message "schema:logo ontbreekt of zijn Object is geen meemoo:logo"@nl
              ], 
              [
                sh:path foaf:homepage ;
                # vraag: moet een minCount 0 expliciet aangegeven worden?
                sh:minCount 0 ;
                sh:maxCount 1 ;
                sh:nodeKind sh:IRI ;
                
                sh:name "homepage"@en ;
                sh:name "page d'accueil"@fr ;
                sh:name "homepagina"@nl ;
                
                sh:severity sh:Warning ;
                sh:message "foaf:homepage occurs more than once or its object is no IRI"@en ;
                sh:message "foaf:homepage apparaît plus d'une seule fois ou son Object n'est pas un IRI"@fr ;
                sh:message "foaf:homepage komt meer dan eens voor of zijn Object is geen IRI"@nl
              ],
              [
                sh:path dct:description ;
                sh:minCount 0 ;
                sh:maxCount 1 ;
                sh:datatype xsd:string ;
                
                sh:name "description"@en ;
                sh:name "description"@fr ;
                sh:name "beschrijving"@nl ;
                
                sh:description "Description of the organization."@en ;
                sh:description "Description de l'organization."@fr ;
                sh:description "Beschrijving van de organisatie."@nl ;

                sh:severity sh:Warning ;
                sh:message "dct:description is not of type String or occurs more than once"@en ;
                sh:message "dct:description n'est pas de type String ou apparaît plus d'une seule fois"@fr ;
                sh:message "dct:description is niet van het type String of komt meer dan eens voor"@nl
              ],
              [
                sh:path org:classification ;
                sh:minCount 1 ;
                sh:class meemoo:OrganizationType ;

                sh:name "classification"@en ;
                sh:name "classification"@fr ;
                sh:name "classificatie"@nl ;

                sh:severity sh:Violation ;
                sh:message "org:classification is missing or its Object is no meemoo:OrganizationType"@en ;
                sh:message "org:classification est absent ou son Object n'est pas un meemoo:OrganizationType"@fr ;
                sh:message "org:classification ontbreekt of zijn Object is geen meemoo:OrganizationType"@nl
              ],
              [
                sh:path org:hasUnit ;
                sh:minCount 0 ;
                sh:class org:OrganizationalUnit ;

                sh:name "has Unit"@en ;
                sh:name "possède une Unité"@fr ;
                sh:name "heeft een eenheid"@nl ;
                
                sh:severity sh:Info ;
                sh:message "The Object of org:hasUnit is no org:OrganizationalUnit"@en ;
                sh:message "L'Object de org:hasUnit n'est pas un org:OrganizationalUnit"@fr ;
                sh:message "Het Object van org:hasUnit is geen org:OrganizationalUnit"@nl ;
              ],
              [
                sh:path schema:contactPoint ;
                sh:minCount 0 ;
                sh:class schema:ContactPoint ;
                
                sh:name "contact point"@en ;
                sh:name "point de contact"@fr ;
                sh:name "aanspreekpunt"@nl ;
                
                sh:severity sh:Info ;
                sh:message "org:contactPoint is no schema:ContactPoint"@en ;
                sh:message "org:contactPoint n'est pas un schema:ContactPoint"@fr ;
                sh:message "org:contactPoint is geen schema:ContactPoint"@nl
              ],
              [
                sh:path org:hasSite ;
                sh:minCount 0 ;
                sh:class org:Site ;
                
                sh:name "has site"@en ;
                sh:name "a un site"@fr ;
                sh:name "heeft vestiging"@nl ;
                
                sh:severity sh:Warning ;
                sh:message "org:hasSite occurs more than once or its Object is no org:Site"@en ;
                sh:message "org:hasSite apparaît plus d'une seule fois ou son Object n'est pas un org:Site"@fr ;
                sh:message "org:hasSite komt meer dan eens voor of zijn Object is geen org:Site"@nl
              ],
              [
                sh:path org:hasPrimarySite ;
                sh:minCount 0 ;
                sh:maxCount 1 ;
                sh:class org:Site ;
                
                sh:name "has primary site"@en ;
                sh:name "a un site principal"@fr ;
                sh:name "heeft primaire vestiging"@nl ;
                
                sh:severity sh:Warning ;
                sh:message "org:hasPrimarySite occurs more than once or its Object is no org:Site"@en ;
                sh:message "org:hasPrimarySite apparaît plus d'une seule fois ou son Object n'est pas un org:Site"@fr ;
                sh:message "org:hasPrimarySite komt meer dan eens voor of zijn Object is geen org:Site"@nl
              ],
              [
                # vraag: volstaat het om nog een meemoo:isPartOf te definiëren met een nieuwe sh:class om bv. deel uit te maken van een andere agreement?
                # aangezien meemoo:isPartOf slaat op agr:Agreement en niet specifiek op meemoo:CollaborationAgreement?
                sh:path meemoo:isPartOf ;
                sh:minCount 0 ;
                # vraag: kan een org van meerdere SWO's deel uitmaken?
                sh:maxCount 1 ;
                sh:class meemoo:CollaborationAgreement ;
                
                sh:name "is part of"@en ;
                sh:name "fait partie de"@fr ;
                sh:name "maakt deel uit van"@nl ;
                
                sh:severity sh:Info ;
                sh:message "meemoo:isPartOf occurs more than once or its Object is no meemoo:CollaborationAgreement"@en ;
                sh:message "meemoo:isPartOf apparaît plus d'une seule fois ou son Object n'est pas un meemoo:CollaborationAgreement"@fr ;
                sh:message "meemoo:isPartOf komt meer dan eens voor of zijn Object is geen meemoo:CollaborationAgreement"@nl 
              ],
              [
                sh:path meemoo:hasAccountmanager ;
                sh:minCount 0 ;
                sh:maxCount 1 ;
                sh:class schema:Person ;

                sh:name "has account manager"@en ;
                sh:name "a gestionnaire de comptes"@fr ;
                sh:name "heeft account manager"@nl ;

                sh:severity sh:Warning ;
                sh:message "meemoo:hasAccountmanager occurs more than once or its Object is no schema:Person"@en ;
                sh:message "meemoo:hasAccountmanager apparaît plus d'une seule fois ou son Object n'est pas un schema:Person"@fr ;
                sh:message "meemoo:hasAccountmanager komt meer dan eens voor of zijn Object is geen schema:Person"@nl 
              ],
              [
                sh:path org:hasPost ;
                sh:minCount 0 ;
                sh:maxCount 1 ;
                sh:class org:Post ;

                sh:name "has post"@en ;
                sh:name "possède un poste"@fr ;
                sh:name "heeft positie"@nl ;
                sh:description """Indicates a Post which exists within the Organization."""@en ;
                sh:description """Indicate un Poste qui existe dans l'Organisation."""@fr ;
                sh:description """Verwijst naar een positie binnen de organisatie."""@nl ;

                sh:severity sh:Warning ;
                sh:message "org:hasPost occurs more than once or its Object is no org:Post"@en ;
                sh:message "org:hasPost apparaît plus d'une seule fois ou son Object n'est pas un org:Post"@fr ;
                sh:message "org:hasPost komt meer dan eens voor of zijn Object is geen org:Post"@nl ;
              ] .

meemoo:OrganizationalUnitShape a sh:NodeShape ;
  sh:targetClass org:OrganizationalUnit ;
  sh:property [
                sh:path org:unitOf ;
                sh:minCount 1 ;
                sh:class org:Organization ;
        
                sh:name "unit of"@en ;

                sh:name "organisatie-eenheid van"@nl ;
        
                sh:severity sh:Violation ;
                sh:message "org:unitOf is missing or is no IRI"@en
              ] .

meemoo:ContentPartnerShape a sh:NodeShape ;
  sh:targetClass meemoo:ContentPartner ;
  sh:property meemoo:accountManagerShape .

meemoo:ServiceProviderShape  a sh:NodeShape ;
  sh:targetClass meemoo:ServiceProvider .

meemoo:ServiceConsumerShape  a sh:NodeShape ;
  sh:targetClass meemoo:ServiceConsumer .

meemoo:EducationalOrganizationShape  a sh:NodeShape ;
  sh:targetClass meemoo:EducationalOrganization .

meemoo:EducationalPartnerShape  a sh:NodeShape ;
  sh:targetClass meemoo:EducationalPartner ;
  sh:property meemoo:accountManagerShape .

meemoo:EducationalPublisherShape  a sh:NodeShape ;
  sh:targetClass meemoo:EducationalPublisher .

meemoo:SchoolShape a sh:NodeShape ;
  sh:targetClass meemoo:School .

meemoo:CollaborationAgreementShape a sh:NodeShape ;
  sh:targetClass meemoo:CollaborationAgreement .

meemoo:ServiceAgreementShape a sh:NodeShape ;
  sh:targetClass meemoo:ServiceAgreement .

meemoo:SiteShape  a  sh:NodeShape ;
  sh:targetClass org:Site ;
  sh:property [
                sh:path org:siteAddress;
                sh:minCount 0 ;
                sh:maxCount 1 ;
                sh:class schema:ContactPoint;
                
                sh:name "site Address"@en ;
                sh:name "adresse du Site"@fr ;
                sh:name "adres van de vestiging"@nl ;
                sh:description """Indicates an address for the site in a suitable encoding. Use of vCard (using the http://www.w3.org/TR/vcard-rdf/ vocabulary) is encouraged but the range is left open to allow other encodings to be used. The address may include email, telephone, and geo-location information and is not restricted to a physical address. """@en ;
                sh:description """Indique une adresse pour le site dans un encodage approprié. L'usage du vocabulaire vCard ( http://www.w3.org/TR/vcard-rdf/) est encouragé, mais le range est ouvert pour permettre l'utilisation d'autres vocabulaires. L'adresse peut comporter le courriel, le téléphone, et l'information de géolocalisation; et n'est donc pas seulement limitée à une adresse physique. """@fr ;
        
                sh:severity sh:Violation;
                sh:message "org:siteAddress is not unique or does not point to a schema:ContactPoint"@en 
              ] .

meemoo:PostShape a sh:NodeShape;
  sh:targetClass org:Post ;
  sh:property [        
                sh:path org:role ;
                sh:minCount 1 ;
                sh:class org:Role ;
        
                sh:name "role"@en ;
                sh:name "rôle"@fr ;
                sh:name "rol"@nl ;
                sh:description """Indicates the Role that the Agent plays in a Membership relationship with an Organization."""@en ;
                sh:description """Indique le Rôle de l'Agent dans son Engagement avec l'Organisation."""@fr ;
                sh:description """Rol die de agent vervult als lid van de organisatie."""@nl ; 
        
                sh:severity sh:Warning ;
                sh:message "org:role is missing or is no org:Role"@en 
              ],
              [                
                sh:path org:postIn ;
                sh:minCount 1 ;
                sh:class org:Organization ;
        
                sh:name "post in"@en ;
                sh:name "poste chez"@fr ;
                sh:name "positie in"@nl ;
                sh:description """Indicates the Organization in which the Post exists."""@en ;
                sh:description """Indicate l'Organisation dans laquelle le Poste existe."""@fr ;
        
                sh:severity sh:Warning ;
                sh:message "org:postIn is missing or is no org:Organization"@en 
              ] .
    
meemoo:RoleShape a sh:NodeShape;
  sh:targetClass org:Role ;
  sh:property meemoo:prefLabelShape .

meemoo:PersonShape a sh:NodeShape ;
  sh:targetClass schema:Person ;
  sh:property [    
                sh:path org:holds ;
                sh:minCount 1 ;
                sh:class org:Post ;
    
                sh:name "holds"@en ;
                sh:name "heeft positie"@nl ;
    
                sh:severity sh:Warning ;
                sh:message "org:holds is missing or is no IRI"@en
              ],
              [    
                sh:path schema:givenName ;
                sh:datatype xsd:string ;

                sh:description "Given name. In the U.S., the first name of a Person. This can be used along with familyName instead of the name property."@en ;
                sh:name "given name"@en;
                sh:name "voornaam"@nl
              ],
              [    
                sh:path schema:familyName ;
                sh:datatype xsd:string ;

                sh:description "Family name. In the U.S., the last name of an Person. This can be used along with givenName instead of the name property."@en ;
                sh:name "family name"@en ;
                sh:name "familienaam"@nl ;
              ],
              [
                sh:path schema:email ;
                sh:datatype xsd:string ;
                sh:description "Email address."@en ;
                sh:name "email"@en ;
                sh:name "email"@nl ;
              ],
              [
                sh:path meemoo:isAccountManagerOf ;
                sh:minCount 0 ;
                sh:maxCount 1 ;
                sh:or (
                        [ sh:class org:ContentPartner ]
                        [ sh:class org:EducationalPartner ]
                      ) ;
                sh:name "is account manager of"@en ;
                sh:name "est le Gestionnaire de Comptes de"@fr ;
                sh:name "is account manager van"@nl ;
    
                sh:severity sh:Warning ;
                sh:message "A schema:Person can only be meemoo:isAccountManagerOf one org:ContentPartner"@en
              ] .

meemoo:PostalAddressShape  a sh:NodeShape ;
  sh:targetClass schema:PostalAddress ;
  sh:property schema:PostalAddress-addressCountry ;
  sh:property schema:PostalAddress-addressLocality ;
  sh:property schema:PostalAddress-addressRegion ;
  sh:property schema:PostalAddress-postOfficeBoxNumber ;
  sh:property schema:PostalAddress-postalCode ;
  sh:property schema:PostalAddress-streetAddress .

meemoo:ContactPointShape  a sh:NodeShape ;
  sh:targetClass schema:ContactPoint ;
  sh:property schema:ContactPoint-contactTypeShape ;
  sh:property schema:ContactPoint-emailShape ;
  sh:property schema:ContactPoint-telephoneShape .

##########################
#     PropertyShapes     #
##########################

meemoo:PostalAddress-addressCountryShape a sh:PropertyShape ;
  sh:path schema:addressCountry ;
  
  sh:description "The country. For example, USA. You can also provide the two-letter <a href=\"http://en.wikipedia.org/wiki/ISO_3166-1\">ISO 3166-1 alpha-2 country code</a>."^^rdf:HTML ;
  sh:name "country"@en ;
  sh:name "land"@nl ;
  
  sh:or (
          [ sh:class schema:Country ]
          [ sh:datatype xsd:string ]
        ) .

meemoo:PostalAddress-addressLocalityShape  a  sh:PropertyShape ;
  sh:path schema:addressLocality ;
  sh:datatype xsd:string ;
  
  sh:description "The locality in which the street address is, and which is in the region. For example, Mountain View."^^rdf:HTML ;
  sh:name "addressLocality" .

meemoo:PostalAddress-addressRegionShape  a sh:PropertyShape ;
  sh:path schema:addressRegion ;
  sh:datatype xsd:string ;
  
  sh:description "The region in which the locality is, and which is in the country. For example, California or another appropriate first-level <a href=\"https://en.wikipedia.org/wiki/List_of_administrative_divisions_by_country\">Administrative division</a>"^^rdf:HTML ;
  sh:name "addressRegion" .

meemoo:PostalAddress-postOfficeBoxNumberShape  a sh:PropertyShape ;
  sh:path schema:postOfficeBoxNumber ;
  sh:datatype xsd:string ;
  
  sh:description "The post office box number for PO box addresses."^^rdf:HTML ;
  sh:name "postOfficeBoxNumber" .

meemoo:PostalAddress-postalCodeShape a sh:PropertyShape ;
  sh:path schema:postalCode ;
  sh:datatype xsd:string ;

  sh:description "The postal code. For example, 94043."^^rdf:HTML ;
  sh:name "postalCode" .

meemoo:PostalAddress-streetAddressShape  a sh:PropertyShape ;
  sh:path schema:streetAddress ;
  sh:datatype xsd:string ;
  
  sh:description "The street address. For example, 1600 Amphitheatre Pkwy."^^rdf:HTML ;
  sh:name "streetAddress" .

meemoo:ContactPoint-contactTypeShape  a sh:PropertyShape ;
  sh:path schema:contactType ;
  sh:datatype xsd:string ;
  
  sh:description "A person or organization can have different contact points, for different purposes. For example, a sales contact point, a PR contact point and so on. This property is used to specify the kind of contact point."^^rdf:HTML ;
  sh:name "contact type"@en ;
  sh:name "contacttype"@nl .

meemoo:ContactPoint-emailShape a sh:PropertyShape ;
  sh:path schema:email ;
  sh:datatype xsd:string ;
  
  sh:description "Email address."^^rdf:HTML ;
  sh:name "email"@en ;
  sh:name "email"@nl .

meemoo:ContactPoint-telephoneShape  a sh:PropertyShape ;
  sh:path schema:telephone ;
  sh:datatype xsd:string ;
  
  sh:description "The telephone number."^^rdf:HTML ;
  sh:name "telephone"@en ;
  sh:name "telefoonnummer"@nl .

meemoo:prefLabelShape  a sh:PropertyShape ;
  sh:path skos:prefLabel ;
  sh:datatype xsd:string ;
    
  sh:name "preferred label"@en ;
  sh:name "voorkeursnaam"@nl ;
    
  sh:severity sh:Violation ;
  sh:message "skos:prefLabel is missing or is no Literal"@en .

meemoo:altLabelShape a sh:PropertyShape ;
  sh:path skos:altLabel ;
  sh:datatype xsd:string ;
  sh:minCount 0 ;

  sh:name "alternative label"@en ;
  sh:name "alternatieve naam"@nl ;
    
  sh:severity sh:Violation ;
  sh:message "skos:altLabel is missing or no Literal"@en .
    
meemoo:accountManagerShape  a sh:PropertyShape ;    
  sh:path meemoo:hasAccountmanager ;
  sh:minCount 1 ;
  sh:maxCount 1 ;
  sh:class schema:Person ;
    
  sh:name "has account manager"@en ;
  sh:name "a gestionnaire de comptes"@fr ;
  sh:name "heeft account manager"@nl ;
    
  sh:severity sh:Warning ;
  sh:message "meemoo:accountmanager is missing or is no IRI"@en .